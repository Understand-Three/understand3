---
title: 纯度
draft: true
---
# 纯度

Slint 的属性评估是懒惰的和“反应式”的。属性绑定在读取属性值时进行评估。属性之间的依赖关系会在属性评估过程中自动发现。属性存储评估结果。当属性发生变化时，所有依赖的属性会收到通知，因此下次读取它们的值时，它们的绑定会重新评估。

为了确保任何反应式系统正常工作，评估一个属性不应改变任何可观察的状态，除了该属性本身。如果是这种情况，那么该表达式是“纯的”；否则，称其具有副作用。副作用是有问题的，因为并不总是明确它们何时会发生：懒惰评估可能改变它们的顺序或影响它们是否发生。此外，由于副作用在绑定评估期间对属性的更改可能导致意外行为。

因此，Slint 中的绑定 **必须** 是纯的。Slint 编译器强制要求纯上下文中的代码没有副作用。纯上下文包括绑定表达式、纯函数的主体以及纯回调处理程序的主体。在这种上下文中，不允许更改属性或调用非纯回调或函数。

使用 `pure` 关键字标注回调和公共函数，使其可以从属性绑定和其他纯回调及函数中访问。

私有函数的纯度会自动推断。您可以显式地将私有函数声明为“纯”，以使编译器强制执行其纯度。

```slint
export component Example {
    pure callback foo() -> int;
    public pure function bar(x: int) -> int
    { return x + foo(); }
}
```